<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <style>
        body { margin: 0; background: #000; overflow: hidden; display: flex; justify-content: center; align-items: center; height: 100vh; }
        canvas { position: absolute; top: 0; left: 0; }
        #bg { z-index: 0; }
        #heart { z-index: 1; }
    </style>
</head>
<body>
    <canvas id="bg"></canvas>
    <canvas id="heart"></canvas>

    <script>
        const bgCanvas = document.getElementById('bg');
        const bgCtx = bgCanvas.getContext('2d');
        const heartCanvas = document.getElementById('heart');
        const heartCtx = heartCanvas.getContext('2d');

        let width = bgCanvas.width = heartCanvas.width = window.innerWidth;
        let height = bgCanvas.height = heartCanvas.height = window.innerHeight;

        // --- NỀN CHẤM CHẤM DI CHUYỂN ---
        const bgParticles = [];
        class BgParticle {
            constructor() {
                this.x = Math.random() * width;
                this.y = Math.random() * height;
                this.v = { x: (Math.random() - 0.5) * 0.4, y: (Math.random() - 0.5) * 0.4 };
                this.color = `hsl(${Math.random() * 360}, 70%, 70%)`;
            }
            update() {
                this.x += this.v.x; this.y += this.v.y;
                if (this.x < 0 || this.x > width) this.v.x *= -1;
                if (this.y < 0 || this.y > height) this.v.y *= -1;
            }
            draw() {
                bgCtx.beginPath();
                bgCtx.arc(this.x, this.y, 1.2, 0, Math.PI * 2);
                bgCtx.fillStyle = this.color;
                bgCtx.globalAlpha = 0.4;
                bgCtx.fill();
            }
        }
        for(let i=0; i<150; i++) bgParticles.push(new BgParticle());

        // --- TRÁI TIM VIỀN ĐẬM (DÀY & TO) ---
        const heartParticles = [];
        function getPoint(t) {
            let x = 16 * Math.pow(Math.sin(t), 3);
            let y = -(13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t));
            return { x: x * 18, y: y * 18 }; // Tăng scale lên 18 cho trái tim to ra
        }

        class HeartParticle {
            constructor() {
                this.t = Math.random() * Math.PI * 2;
                let pos = getPoint(this.t);
                this.x = width/2 + pos.x;
                this.y = height/2 + pos.y;
                this.size = Math.random() * 3 + 1.5; // Hạt to hơn nhìn cho rõ
                this.alpha = Math.random();
                this.speed = 0.02 + Math.random() * 0.03;
            }
            draw() {
                heartCtx.save();
                heartCtx.globalAlpha = this.alpha;
                heartCtx.shadowBlur = 15; // Hiệu ứng tỏa sáng mạnh
                heartCtx.shadowColor = '#ff2d95';
                heartCtx.fillStyle = '#ff2d95'; 
                heartCtx.beginPath();
                heartCtx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                heartCtx.fill();
                heartCtx.restore();
            }
            update() {
                this.alpha += this.speed;
                if (this.alpha > 1 || this.alpha < 0.2) this.speed *= -1;
                this.x += (Math.random() - 0.5) * 0.5;
                this.y += (Math.random() - 0.5) * 0.5;
            }
        }
        for(let i=0; i<1200; i++) heartParticles.push(new HeartParticle()); // Tăng lên 1200 hạt cực dày

        function loop() {
            bgCtx.clearRect(0,0,width,height);
            heartCtx.clearRect(0,0,width,height);
            bgParticles.forEach(p => { p.update(); p.draw(); });
            heartParticles.forEach(p => { p.update(); p.draw(); });
            requestAnimationFrame(loop);
        }
        loop();

        window.onresize = () => {
            width = bgCanvas.width = heartCanvas.width = window.innerWidth;
            height = bgCanvas.height = heartCanvas.height = window.innerHeight;
        };
    </script>
</body>
</html>
