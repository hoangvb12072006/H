<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Heart Glow Effect</title>
    <style>
        body { margin: 0; background: #000; overflow: hidden; display: flex; justify-content: center; align-items: center; height: 100vh; }
        canvas { position: absolute; top: 0; left: 0; }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        let width = canvas.width = window.innerWidth;
        let height = canvas.height = window.innerHeight;

        const bgParticles = [];
        const bgCount = 100; 
        const colors = ['#88FFFF', '#FF88FF', '#FFFF88', '#88FF88', '#FFFFFF'];

        class BgParticle {
            constructor() { this.init(); }
            init() {
                this.x = Math.random() * width;
                this.y = Math.random() * height;
                this.size = Math.random() * 1.5;
                this.color = colors[Math.floor(Math.random() * colors.length)];
                this.vx = (Math.random() - 0.5) * 0.5;
                this.vy = (Math.random() - 0.5) * 0.5;
            }
            update() {
                this.x += this.vx; this.y += this.vy;
                if (this.x < 0 || this.x > width) this.vx *= -1;
                if (this.y < 0 || this.y > height) this.vy *= -1;
            }
            draw() {
                ctx.fillStyle = this.color;
                ctx.globalAlpha = 0.3;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        // --- CẤU HÌNH TRÁI TIM KIỂU MỚI (PHÁT TÁN) ---
        const heartParticles = [];
        const heartCount = 400; // Số lượng hạt gốc

        function getHeartPoint(t) {
            let x = 16 * Math.pow(Math.sin(t), 3);
            let y = -(13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t));
            return { x: x * 15, y: y * 15 }; 
        }

        class HeartParticle {
            constructor() {
                this.init();
            }
            init() {
                this.t = Math.random() * Math.PI * 2;
                let pos = getHeartPoint(this.t);
                this.x = width/2 + pos.x;
                this.y = height/2 + pos.y;
                // Tạo vận tốc bay ra ngoài để viền trông "nhòe" và lung linh như ảnh 1
                this.vx = (Math.random() - 0.5) * 1.5;
                this.vy = (Math.random() - 0.5) * 1.5;
                this.size = Math.random() * 3 + 1;
                this.alpha = 1;
                this.gravity = 0.02;
                this.maxLife = Math.random() * 50 + 20;
                this.life = 0;
            }
            update() {
                this.x += this.vx;
                this.y += this.vy;
                this.life++;
                this.alpha = 1 - (this.life / this.maxLife);
                if (this.life >= this.maxLife) {
                    this.init(); // Reset hạt để tạo vòng lặp liên tục
                }
            }
            draw() {
                ctx.shadowBlur = 15;
                ctx.shadowColor = '#ff4d94';
                ctx.fillStyle = `rgba(255, 77, 148, ${this.alpha})`;
                ctx.beginPath();
                // Vẽ hình tròn nhưng tạo cảm giác như hạt bụi/cánh hoa
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        for(let i=0; i<bgCount; i++) bgParticles.push(new BgParticle());
        for(let i=0; i<heartCount; i++) heartParticles.push(new HeartParticle());

        function animate() {
            // Hiệu ứng chồng lớp để tạo đuôi (trail)
            ctx.fillStyle = 'rgba(0, 0, 0, 0.2)';
            ctx.fillRect(0, 0, width, height);
            ctx.shadowBlur = 0; // Reset shadow cho background

            bgParticles.forEach(p => { p.update(); p.draw(); });
            
            ctx.globalCompositeOperation = 'lighter'; // Giúp màu sắc rực rỡ hơn khi chồng nhau
            heartParticles.forEach(p => { p.update(); p.draw(); });
            ctx.globalCompositeOperation = 'source-over';

            requestAnimationFrame(animate);
        }

        animate();

        window.onresize = () => {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
        };
    </script>
</body>
</html>
