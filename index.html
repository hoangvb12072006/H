<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Trái Tim Lấp Lánh & Nền Chấm Chấm</title>
    <style>
        body {
            margin: 0;
            background: #000;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            position: relative; /* Quan trọng để canvas con nằm trên nền */
        }
        canvas {
            position: absolute;
            top: 0;
            left: 0;
        }
        #backgroundCanvas {
            z-index: 0; /* Nền chấm chấm ở dưới */
        }
        #heartCanvas {
            z-index: 1; /* Trái tim ở trên */
        }
    </style>
</head>
<body>
    <canvas id="backgroundCanvas"></canvas>
    <canvas id="heartCanvas"></canvas>

    <script>
        // --- Nền chấm chấm di chuyển (Background Particles) ---
        const bgCanvas = document.getElementById('backgroundCanvas');
        const bgCtx = bgCanvas.getContext('2d');

        bgCanvas.width = window.innerWidth;
        bgCanvas.height = window.innerHeight;

        const bgParticles = [];
        const bgParticleCount = 150; // Số lượng chấm chấm trên nền

        function getRandomColor() {
            const colors = ['#88FFFF', '#FF88FF', '#FFFF88', '#FF8888', '#88FF88']; // Các màu đẹp để luân phiên
            return colors[Math.floor(Math.random() * colors.length)];
        }

        class BgParticle {
            constructor() {
                this.x = Math.random() * bgCanvas.width;
                this.y = Math.random() * bgCanvas.height;
                this.radius = Math.random() * 2 + 0.5;
                this.color = getRandomColor();
                this.velocity = {
                    x: (Math.random() - 0.5) * 0.5, // Tốc độ di chuyển ngẫu nhiên
                    y: (Math.random() - 0.5) * 0.5
                };
            }

            draw() {
                bgCtx.beginPath();
                bgCtx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                bgCtx.fillStyle = this.color;
                bgCtx.globalAlpha = 0.6; // Hơi trong suốt
                bgCtx.shadowBlur = 5;
                bgCtx.shadowColor = this.color;
                bgCtx.fill();
            }

            update() {
                this.x += this.velocity.x;
                this.y += this.velocity.y;

                // Xử lý khi chấm chấm ra khỏi màn hình
                if (this.x < 0 || this.x > bgCanvas.width) this.velocity.x *= -1;
                if (this.y < 0 || this.y > bgCanvas.height) this.velocity.y *= -1;
            }
        }

        for (let i = 0; i < bgParticleCount; i++) {
            bgParticles.push(new BgParticle());
        }

        function animateBackground() {
            bgCtx.clearRect(0, 0, bgCanvas.width, bgCanvas.height); // Xóa canvas để vẽ lại
            bgParticles.forEach(p => {
                p.update();
                p.draw();
            });
            requestAnimationFrame(animateBackground);
        }
        animateBackground();


        // --- Trái tim lấp lánh (Heart Particles) ---
        const heartCanvas = document.getElementById('heartCanvas');
        const heartCtx = heartCanvas.getContext('2d');

        heartCanvas.width = window.innerWidth;
        heartCanvas.height = window.innerHeight;

        const heartParticles = [];
        const heartParticleCount = 600;

        function getHeartPoint(t) {
            let x = 16 * Math.pow(Math.sin(t), 3);
            let y = -(13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t));
            return { x: x * 15, y: y * 15 };
        }

        class HeartParticle {
            constructor() {
                this.t = Math.random() * Math.PI * 2;
                this.basePos = getHeartPoint(this.t);
                this.x = heartCanvas.width / 2 + this.basePos.x;
                this.y = heartCanvas.height / 2 + this.basePos.y;
                this.size = Math.random() * 2 + 0.5;
                this.color = '#ff85ba'; // Màu hồng sáng giống ảnh
                this.blinkSpeed = Math.random() * 0.05 + 0.02;
                this.alpha = Math.random();
            }

            draw() {
                heartCtx.save();
                heartCtx.beginPath();
                heartCtx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                heartCtx.fillStyle = this.color;
                heartCtx.globalAlpha = this.alpha;
                heartCtx.shadowBlur = 10;
                heartCtx.shadowColor = '#ff85ba';
                heartCtx.fill();
                heartCtx.restore();
            }

            update() {
                this.alpha += this.blinkSpeed;
                if (this.alpha > 1 || this.alpha < 0) {
                    this.blinkSpeed *= -1;
                }
                this.x += (Math.random() - 0.5) * 0.8;
                this.y += (Math.random() - 0.5) * 0.8;
            }
        }

        for (let i = 0; i < heartParticleCount; i++) {
            heartParticles.push(new HeartParticle());
        }

        function animateHeart() {
            heartCtx.clearRect(0, 0, heartCanvas.width, heartCanvas.height); // Xóa canvas trái tim
            heartParticles.forEach(p => {
                p.update();
                p.draw();
            });
            requestAnimationFrame(animateHeart);
        }
        animateHeart();


        // Xử lý khi thay đổi kích thước cửa sổ
        window.addEventListener('resize', () => {
            bgCanvas.width = window.innerWidth;
            bgCanvas.height = window.innerHeight;
            heartCanvas.width = window.innerWidth;
            heartCanvas.height = window.innerHeight;
            // Cần tạo lại các hạt để chúng phân bố lại cho đẹp
            bgParticles.length = 0;
            for (let i = 0; i < bgParticleCount; i++) {
                bgParticles.push(new BgParticle());
            }
            heartParticles.length = 0;
            for (let i = 0; i < heartParticleCount; i++) {
                heartParticles.push(new HeartParticle());
            }
        });
    </script>
</body>
</html>
