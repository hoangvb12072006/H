<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Animated Glowing Heart</title>
    <style>
        body { margin: 0; background: #000; overflow: hidden; display: flex; justify-content: center; align-items: center; height: 100vh; }
        canvas { position: absolute; top: 0; left: 0; }
        #loveText {
            position: absolute;
            color: #fff; /* Màu chữ trắng */
            font-family: 'Arial', sans-serif; /* Font chữ */
            font-size: 3em; /* Kích thước chữ */
            text-shadow: 0 0 15px #ff4d94, 0 0 25px #ff4d94; /* Đổ bóng phát sáng */
            opacity: 0; /* Bắt đầu ẩn */
            animation: fadeInOutText 8s infinite ease-in-out; /* Hiệu ứng nhấp nháy, xuất hiện/biến mất */
            z-index: 10;
        }

        @keyframes fadeInOutText {
            0% { opacity: 0; transform: scale(0.95); }
            20% { opacity: 0.9; transform: scale(1.05); }
            50% { opacity: 0.8; transform: scale(0.98); }
            80% { opacity: 0.9; transform: scale(1.05); }
            100% { opacity: 0; transform: scale(0.95); }
        }
    </style>
</head>
<body>
    <canvas id="canvas"></canvas>
    <div id="loveText">I Love You</div>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        const loveTextDiv = document.getElementById('loveText');

        let width = canvas.width = window.innerWidth;
        let height = canvas.height = window.innerHeight;

        // --- CẤU HÌNH HẠT NỀN LẤP LÁNH NHẸ NHÀNG ---
        const backgroundSparkles = [];
        const sparkleCount = 60; // Số lượng hạt lấp lánh nền
        const sparkleColors = ['#fff', '#ccc', '#eee'];

        class Sparkle {
            constructor() {
                this.init();
            }
            init() {
                this.x = Math.random() * width;
                this.y = Math.random() * height;
                this.size = Math.random() * 1.5;
                this.alpha = Math.random();
                this.speed = (Math.random() - 0.5) * 0.005; // Tốc độ nhấp nháy
                this.color = sparkleColors[Math.floor(Math.random() * sparkleColors.length)];
            }
            update() {
                this.alpha += this.speed;
                if (this.alpha > 0.8 || this.alpha < 0.1) {
                    this.speed *= -1;
                }
            }
            draw() {
                ctx.fillStyle = this.color;
                ctx.globalAlpha = this.alpha;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        // --- CẤU HÌNH TRÁI TIM CHÍNH ---
        const heartParticles = [];
        const heartCount = 600; // Tăng số lượng hạt lên để viền dày hơn và mượt hơn

        // Tham số cho hiệu ứng nhịp đập của trái tim
        let heartBeatScale = 1;
        let heartBeatSpeed = 0.005; // Tốc độ đập
        let heartBeatAmplitude = 0.05; // Biên độ đập (từ 1.0 đến 1.05)

        function getHeartPoint(t, scaleFactor) {
            let x = 16 * Math.pow(Math.sin(t), 3);
            let y = -(13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t));
            return { x: x * 15 * scaleFactor, y: y * 15 * scaleFactor }; 
        }

        class HeartParticle {
            constructor() {
                this.init();
            }
            init() {
                this.t = Math.random() * Math.PI * 2;
                this.originalPos = getHeartPoint(this.t, 1); // Vị trí gốc ban đầu
                this.x = width / 2 + this.originalPos.x;
                this.y = height / 2 + this.originalPos.y;
                
                this.vx = (Math.random() - 0.5) * 1.5; // Tốc độ văng ban đầu
                this.vy = (Math.random() - 0.5) * 1.5; 
                
                this.size = Math.random() * 3 + 0.5;
                this.alpha = Math.random();
                this.maxLife = Math.random() * 80 + 30; // Tăng vòng đời để vệt sáng dài hơn
                this.life = 0;
            }
            update() {
                this.x += this.vx;
                this.y += this.vy;
                this.life++;
                this.alpha = 1 - (this.life / this.maxLife);
                
                if (this.life >= this.maxLife) {
                    this.init();
                }

                // Hạt sẽ luôn được kéo về vị trí của trái tim đang đập
                let currentHeartPos = getHeartPoint(this.t, heartBeatScale);
                let targetX = width / 2 + currentHeartPos.x;
                let targetY = height / 2 + currentHeartPos.y;

                // Tạo lực hút về trái tim (để các hạt không bay quá xa)
                this.vx += (targetX - this.x) * 0.005;
                this.vy += (targetY - this.y) * 0.005;

                // Giảm tốc độ bay của hạt theo thời gian (ma sát)
                this.vx *= 0.98;
                this.vy *= 0.98;
            }
            draw() {
                ctx.shadowBlur = 18; // Tăng độ mờ ảo
                ctx.shadowColor = '#ff2d95';
                ctx.fillStyle = `rgba(255, 45, 149, ${this.alpha})`;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        // Khởi tạo các hạt
        for(let i = 0; i < sparkleCount; i++) backgroundSparkles.push(new Sparkle());
        for(let i = 0; i < heartCount; i++) heartParticles.push(new HeartParticle());

        function animate() {
            // Nền đen với độ mờ nhẹ để tạo hiệu ứng vệt sáng (trail effect)
            ctx.fillStyle = 'rgba(0, 0, 0, 0.1)'; // Giảm opacity để vệt sáng dài và mượt hơn
            ctx.fillRect(0, 0, width, height);
            ctx.shadowBlur = 0; 

            // Cập nhật và vẽ hạt nền lấp lánh
            ctx.globalCompositeOperation = 'source-over'; // Trở lại chế độ bình thường để vẽ hạt nền
            backgroundSparkles.forEach(p => { p.update(); p.draw(); });

            // Cập nhật hiệu ứng nhịp đập
            heartBeatScale = 1 + Math.sin(Date.now() * heartBeatSpeed) * heartBeatAmplitude;

            // Chế độ cộng hưởng màu cho trái tim
            ctx.globalCompositeOperation = 'lighter';
            heartParticles.forEach(p => { 
                p.update(); 
                p.draw(); 
            });
            ctx.globalCompositeOperation = 'source-over'; // Trở lại chế độ bình thường sau khi vẽ trái tim

            requestAnimationFrame(animate);
        }

        animate();

        window.onresize = () => {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
            // Cập nhật lại vị trí cho chữ khi thay đổi kích thước cửa sổ
            loveTextDiv.style.left = (width / 2 - loveTextDiv.offsetWidth / 2) + 'px';
            loveTextDiv.style.top = (height / 2 - loveTextDiv.offsetHeight / 2) + 'px';
        };

        // Đảm bảo chữ được căn giữa khi tải trang lần đầu
        window.onload = () => {
             loveTextDiv.style.left = (width / 2 - loveTextDiv.offsetWidth / 2) + 'px';
             loveTextDiv.style.top = (height / 2 - loveTextDiv.offsetHeight / 2) + 'px';
        };
    </script>
</body>
</html>
